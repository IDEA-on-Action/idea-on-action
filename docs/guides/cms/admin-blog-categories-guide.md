# AdminBlogCategories 관리 가이드

## 개요

### 목적
AdminBlogCategories 페이지는 블로그 포스트를 분류하는 카테고리를 관리하는 관리자 전용 페이지입니다. 카테고리의 이름, 설명, 색상, 아이콘 등을 등록하고 관리할 수 있습니다. 각 카테고리는 블로그 포스트 분류, 사용자 인터페이스의 시각적 구분, 그리고 콘텐츠 조직화에 중요한 역할을 합니다.

### 주요 기능
- 카테고리 목록 조회
- 카테고리 검색 및 필터링 (포스트 수 기준)
- 카테고리 생성, 수정, 삭제
- 색상 및 아이콘 관리
- 통계 카드 (총 카테고리, 포스트가 있는 카테고리, 빈 카테고리, 총 포스트 수)

### 접근 권한
- **필요 권한**: Admin 이상 (editor, admin, super_admin)
- **접근 경로**: `/admin/blog/categories`

---

## 화면 구성

### 목록 화면
- **상단**: 페이지 제목, "새 카테고리" 버튼
- **통계 카드** (4개):
  - 총 카테고리: 전체 카테고리 개수
  - 포스트가 있는 카테고리: 포스트를 포함하는 카테고리 개수
  - 빈 카테고리: 포스트가 없는 카테고리 개수
  - 총 포스트 수: 모든 카테고리의 포스트 합계
- **검색 및 필터**:
  - 검색창: 카테고리 이름, 설명으로 검색
  - 포스트 수 필터: 전체, 0개, 1-10개, 10+개
- **테이블 컬럼** (7개):
  - 색상: 카테고리 색상 미리보기 (사각형) + hex 코드
  - 이름: 카테고리 이름
  - Slug: URL-friendly kebab-case 식별자
  - 아이콘: Lucide 아이콘 이름 (뱃지)
  - 포스트 수: 카테고리에 포함된 포스트 개수 (뱃지)
  - 설명: 카테고리 설명 (최대 300자 표시)
  - 생성일: 카테고리 생성 날짜 (상대 시간)

### 생성/편집 화면
- **모달 다이얼로그** 형태로 표시
- **2개 섹션** (Accordion):
  - 기본 정보: 이름, Slug, 설명
  - 스타일링: 색상, 아이콘

---

## 기능 사용법

### 1. 조회

#### 목록 조회
1. `/admin/blog/categories` 페이지에 접속합니다.
2. 등록된 모든 카테고리가 테이블로 표시됩니다.
3. 각 카테고리의 색상, 이름, 설명, 포스트 수를 한눈에 확인할 수 있습니다.
4. 상단의 통계 카드에서 전체 현황을 파악할 수 있습니다.

#### 검색
1. 상단 검색창에 카테고리 이름 또는 설명의 일부를 입력합니다.
2. 입력과 동시에 실시간으로 필터링됩니다 (300ms 디바운싱 적용).
3. 검색어는 대소문자 구분 없이 동작합니다.

#### 필터링
- **포스트 수 필터**:
  - 전체: 모든 카테고리 표시
  - 0개: 포스트가 없는 카테고리만 표시 (빈 카테고리)
  - 1-10개: 포스트가 1-10개인 카테고리 표시
  - 10+개: 포스트가 10개 이상인 카테고리 표시

#### 정렬
- 기본 정렬: 최근 생성순 (created_at DESC)
- 테이블 헤더 클릭으로 정렬 변경 불가 (현재 버전)

---

### 2. 생성

#### 필수 입력 항목
- **이름** (필수): 카테고리 이름 (예: 기술 뉴스, React, 튜토리얼)
- **색상** (필수): hex 형식 색상 코드 (예: #3b82f6)
- **아이콘** (필수): Lucide 아이콘 이름 (예: BookOpen, Code)

#### 선택 입력 항목
- **Slug** (선택): URL-friendly kebab-case 식별자. 입력하지 않으면 자동 생성됩니다.
  - 예: "기술-뉴스" → "gisul-nyuseu"
  - 자동 생성 규칙: 한글 → 자동 변환, 공백 → 하이픈, 특수문자 제거
- **설명** (선택): 카테고리에 대한 설명 (최대 500자)

#### 폼 검증 규칙
- **이름**: 최소 2자 이상, 최대 50자 이하
- **Slug**: kebab-case 형식 (정규식: `^[a-z0-9-]+$`)
  - 소문자, 숫자, 하이픈만 허용
  - 예시: technology, web-development, react-tutorials
- **설명**: 최대 500자 이하
- **색상**: 유효한 hex 코드 (정규식: `^#[0-9A-Fa-f]{6}$`)
  - 예시: #3b82f6, #f59e0b, #10b981
- **아이콘**: 1자 이상, 50자 이하의 Lucide 아이콘 이름

#### 단계별 생성 가이드
1. 우측 상단 "새 카테고리" 버튼을 클릭합니다.
2. 모달 다이얼로그가 열립니다.
3. **기본 정보 섹션**에서:
   - 카테고리 이름을 입력합니다 (예: "프론트엔드 개발").
   - 이름을 입력한 후 blur 이벤트 시 Slug가 자동 생성됩니다.
   - Slug를 수정하려면 "Generate" 버튼을 클릭하여 다시 생성하거나 직접 입력합니다.
   - 설명을 입력합니다 (선택 사항, 최대 500자).
4. **스타일링 섹션**으로 이동합니다.
5. **색상 선택**:
   - ColorPicker를 클릭하여 색상 선택 창을 엽니다.
   - 16개 프리셋 색상 중 하나를 선택하거나, hex 코드를 직접 입력합니다.
   - Recent colors 영역에서 최근 사용한 색상을 빠르게 선택할 수 있습니다.
6. **아이콘 선택**:
   - 아이콘명 입력 필드에 Lucide 아이콘 이름을 입력합니다.
   - 예: BookOpen, Code, Palette, Briefcase, FileText, Newspaper
7. **저장**:
   - "저장" 버튼을 클릭합니다.
   - 저장 중: "저장 중..." 메시지 표시, 버튼 비활성화
   - 저장 완료: "카테고리 생성 완료" 토스트 메시지 표시, 모달 자동 닫힘
   - 저장 실패: "카테고리 생성 실패" 토스트 메시지 표시, 오류 내용 표시

---

### 3. 수정

#### 수정 가능 항목
- 모든 필드 수정 가능 (이름, Slug, 설명, 색상, 아이콘)

#### 수정 불가 항목
- ID (자동 생성)
- 생성일 (createdAt)
- 수정일 (updatedAt, 자동 업데이트)
- 포스트 개수 (postCount, 자동 계산)

#### 수정 프로세스
1. 테이블에서 수정하려는 카테고리의 "수정" 버튼(연필 아이콘)을 클릭합니다.
2. 모달 다이얼로그가 열리고 기존 값이 폼에 채워집니다.
3. 수정하려는 항목의 값을 변경합니다.
4. "저장" 버튼을 클릭합니다.
5. 저장 완료: "카테고리 수정 완료" 토스트 메시지 표시, 모달 닫힘
6. 저장 실패: "카테고리 수정 실패" 토스트 메시지 표시, 오류 내용 표시

---

### 4. 삭제

#### 삭제 조건
- 관리자 권한이 있는 사용자만 삭제 가능
- 포스트가 있는 카테고리도 삭제할 수 있음 (경고 메시지 표시)
- 삭제된 데이터는 복구할 수 없음

#### 연관 데이터 처리
- **포스트가 없는 카테고리**: 즉시 삭제 가능
- **포스트가 있는 카테고리**: 경고 메시지에서 포스트 개수를 확인하고 삭제 여부를 선택
- **삭제 후 영향**: 해당 카테고리를 사용하던 블로그 포스트는 카테고리 없이 표시됨 (또는 기본값으로 설정)

#### 삭제 프로세스
1. 테이블에서 삭제하려는 카테고리의 "삭제" 버튼(휴지통 아이콘)을 클릭합니다.
2. 삭제 확인 다이얼로그가 표시됩니다.
3. 메시지:
   - 포스트가 없는 경우: "정말로 이 카테고리를 삭제하시겠습니까? 이 작업은 되돌릴 수 없습니다."
   - 포스트가 있는 경우: "이 카테고리에 N개의 포스트가 있습니다. 삭제하시겠습니까?"
4. "삭제" 버튼을 클릭하여 확인합니다.
5. 삭제 완료: "카테고리 삭제 완료" 토스트 메시지 표시
6. 삭제 실패: "카테고리 삭제 실패" 토스트 메시지 표시, 오류 내용 표시

---

## 필드 상세 설명

| 필드명 | 타입 | 필수 | 길이 | 설명 | 예시 |
|--------|------|------|------|------|------|
| **이름** | 텍스트 | ✅ | 2-50자 | 카테고리 표시 이름 | 프론트엔드, React |
| **Slug** | 텍스트 | ✅ | 2-50자 | URL-friendly 식별자, kebab-case | frontend, react-tips |
| **설명** | 텍스트 | ❌ | 0-500자 | 카테고리 설명 | 프론트엔드 개발 팁과 기술 뉴스 |
| **색상** | Hex 코드 | ✅ | 7자 | 카테고리 시각화 색상 | #3b82f6, #f59e0b |
| **아이콘** | 문자열 | ✅ | 1-50자 | Lucide 아이콘 이름 | BookOpen, Code |

---

## 색상 가이드

### ColorPicker 사용법
1. 색상 필드를 클릭하여 ColorPicker를 엽니다.
2. 다음 3가지 방법 중 선택합니다:
   - **프리셋 색상**: 16개 프리셋 색상 중 하나 클릭 (권장)
   - **Recent Colors**: 최근 사용한 색상 선택 (빠름)
   - **Hex 입력**: 텍스트 필드에 hex 코드 직접 입력 (예: #3b82f6)

### 16개 프리셋 색상
| 색상 | Hex | 사용 예 |
|------|-----|---------|
| 파란색 | #3b82f6 | 기술, 개발 |
| 주황색 | #f59e0b | 뉴스, 공지 |
| 초록색 | #10b981 | 성공, 팁 |
| 빨간색 | #ef4444 | 중요, 경고 |
| 보라색 | #8b5cf6 | 창의성, 디자인 |
| 핑크색 | #ec4899 | 라이프스타일 |
| 인디고 | #6366f1 | 학습 |
| 사이안 | #06b6d4 | 기초 |
| 라임 | #22c55e | 성능 |
| 스카이 | #0ea5e9 | 미래 기술 |
| 로즈 | #f43f5e | 이슈, 버그 |
| 암버 | #f97316 | 주의 |
| 지석색 | #6b7280 | 중립 |
| 슬레이트 | #64748b | 보조 |
| 톤 | #a16207 | 아카이브 |
| 주니퍼 | #065f46 | 보안 |

### Best Practices
- **일관성**: 같은 종류의 카테고리에는 일관된 색상 사용
- **명도**: 다크 모드에서도 잘 보이는 색상 선택
- **시멘틱**: 색상의 의미와 카테고리 내용을 일치시킴
- **접근성**: 색맹이나 저시력인 사용자를 위해 텍스트와 함께 표시

---

## 아이콘 가이드

### 아이콘 이름 입력 방법
1. 아이콘 필드를 클릭합니다.
2. Lucide 아이콘 이름을 입력합니다 (영어, PascalCase).
3. 예: BookOpen, Code, Palette, Settings

### 추천 아이콘 목록
| 아이콘명 | 추천 카테고리 | 설명 |
|----------|------------|------|
| **BookOpen** | 튜토리얼, 가이드 | 열린 책 아이콘 |
| **Code** | 개발, 프로그래밍 | 코드 괄호 |
| **Palette** | 디자인, UI/UX | 팔레트 |
| **Briefcase** | 비즈니스, 커리어 | 서류가방 |
| **FileText** | 문서, 블로그 | 텍스트 파일 |
| **Newspaper** | 뉴스, 소식 | 신문 |
| **Lightbulb** | 아이디어, 팁 | 전구 |
| **Zap** | 성능, 최적화 | 번개 |
| **Shield** | 보안, 안전 | 방패 |
| **Layers** | 아키텍처, 구조 | 레이어 |
| **Globe** | 웹, 인터넷 | 지구본 |
| **Cpu** | 시스템, 인프라 | CPU |
| **Database** | 데이터, DB | 데이터베이스 |
| **Settings** | 설정, 구성 | 톱니바퀴 |
| **TrendingUp** | 성장, 분석 | 상승 화살표 |
| **Users** | 커뮤니티, 사람 | 여러 명 |

### 아이콘 검색 방법
1. [lucide.dev](https://lucide.dev/) 웹사이트를 방문합니다.
2. 검색창에 원하는 키워드를 입력합니다 (예: "book", "code", "design").
3. 원하는 아이콘을 선택하고 아이콘 이름(PascalCase)을 복사합니다.
4. AdminBlogCategories 폼의 아이콘 필드에 붙여넣습니다.

### 주의사항
- Lucide 라이브러리에 존재하는 아이콘만 입력 가능
- 아이콘명은 정확히 입력해야 함 (대소문자 구분)
- 존재하지 않는 아이콘명 입력 시 폴더 아이콘으로 대체

---

## 통계 카드 가이드

페이지 상단의 4개 통계 카드는 실시간으로 카테고리 현황을 보여줍니다.

### 카드별 설명

#### 1. 총 카테고리
- **표시**: 등록된 모든 카테고리의 개수
- **용도**: 전체 카테고리 관리 현황 파악
- **활용**: 카테고리 추가 필요 여부 판단

#### 2. 포스트가 있는 카테고리
- **표시**: 1개 이상의 포스트를 포함하는 카테고리 개수
- **용도**: 활발한 카테고리 파악
- **활용**: 콘텐츠 분포 확인

#### 3. 빈 카테고리
- **표시**: 포스트가 0개인 카테고리 개수
- **용도**: 미사용 카테고리 파악
- **활용**: 불필요한 카테고리 정리 계획

#### 4. 총 포스트 수
- **표시**: 모든 카테고리에 속한 블로그 포스트의 합계
- **용도**: 전체 콘텐츠 규모 파악
- **활용**: 카테고리별 포스트 분포 계획

---

## 주의사항

### 데이터 일관성
- **Slug 중복**: Slug는 URL에 사용되므로 중복하지 않도록 주의하세요.
- **이름 중복**: 카테고리 이름은 중복 가능하지만, 관리 편의성을 위해 고유한 이름 권장.
- **색상 선택**: 다크 모드에서도 잘 보이는 색상을 선택하세요.
- **아이콘 검증**: Lucide 라이브러리에 없는 아이콘명을 입력하면 기본 폴더 아이콘으로 표시됨.

### 포스트 연관 관리
- **포스트가 있는 카테고리 삭제**: 경고 메시지를 반드시 확인하고 삭제하세요. 포스트는 카테고리 없이 남게 됩니다.
- **카테고리 이름 변경**: 기존 포스트의 카테고리 표시도 함께 변경됩니다 (연관 데이터 자동 업데이트).
- **Slug 변경 시 주의**: 카테고리 URL이 변경될 수 있으므로 신중하게 변경하세요.

### 권한 관리
- **Admin 이상 필요**: editor, admin, super_admin 역할만 접근 가능합니다.
- **RLS 정책**: Supabase RLS 정책에 따라 권한이 제어됩니다.

### 에러 처리
- **네트워크 오류**: 네트워크 연결 실패 시 "알 수 없는 오류가 발생했습니다." 메시지 표시
- **필수 항목 누락**: 필수 항목 미입력 시 빨간색 오류 메시지 표시, 저장 불가
- **색상 형식 오류**: 색상 필드에 잘못된 hex 코드 입력 시 "Color must be a valid hex code (e.g., #3b82f6)" 오류 메시지 표시
- **Slug 형식 오류**: Slug 필드에 잘못된 형식 입력 시 "Slug must be lowercase, numbers, and hyphens only" 오류 메시지 표시
- **아이콘 오류**: 존재하지 않는 아이콘명 입력 시 기본 폴더 아이콘으로 대체

---

## FAQ

### Q1: Slug는 왜 자동 생성되나요?
**A**: Slug는 URL에 사용되는 식별자로, 일관된 형식 (kebab-case)을 유지하기 위해 자동 생성됩니다. 이름에서 자동으로 변환되므로 수동으로 입력할 필요가 없습니다. 필요시 수정할 수 있습니다.

### Q2: 포스트가 있는 카테고리를 삭제하면?
**A**: 포스트가 있는 카테고리를 삭제하면 확인 메시지가 표시됩니다 ("이 카테고리에 N개의 포스트가 있습니다"). 삭제 후 해당 포스트는 카테고리 없이 표시됩니다. 복구할 수 없으므로 신중하게 선택하세요.

### Q3: 색상은 어디에 사용되나요?
**A**: 색상은 다음 위치에 사용됩니다:
- 블로그 포스트 목록에서 카테고리 배지 색상
- 카테고리 필터 UI에서 카테고리 표시
- 관리자 테이블에서 색상 미리보기
- 블로그 상세 페이지에서 카테고리 태그 배경색

### Q4: 아이콘은 어디에 사용되나요?
**A**: 아이콘은 다음 위치에 사용됩니다:
- 블로그 카테고리 목록에서 카테고리 아이콘
- 카테고리 필터에서 카테고리 아이콘
- 블로그 포스트 목록에서 카테고리 아이콘 표시
- 관리자 테이블에서 아이콘 이름 표시

### Q5: 카테고리를 여러 개 한번에 만들 수 있나요?
**A**: 현재 버전에서는 일반적인 CRUD 패턴으로 한 번에 하나씩만 생성할 수 있습니다. 여러 카테고리가 필요하면 "새 카테고리" 버튼을 여러 번 클릭하여 순차적으로 생성하세요.

### Q6: 카테고리 순서를 정렬할 수 있나요?
**A**: 현재 버전에서는 테이블 헤더를 클릭해도 정렬이 변경되지 않습니다. 기본 정렬은 생성 순서 (최신순)입니다. 향후 버전에서 드래그 앤 드롭 정렬 기능이 추가될 수 있습니다.

### Q7: 설명 필드는 필수인가요?
**A**: 아니요, 설명 필드는 선택 항목입니다. 설명 없이 카테고리를 생성할 수 있습니다. 설명을 입력하면 사용자에게 카테고리의 목적을 더 명확하게 전달할 수 있습니다.

### Q8: 존재하지 않는 아이콘 이름을 입력하면?
**A**: 존재하지 않는 아이콘 이름을 입력하면 시스템이 기본 폴더 아이콘 ("folder")으로 대체합니다. [lucide.dev](https://lucide.dev/)에서 정확한 아이콘 이름을 확인하고 입력하세요.

### Q9: 카테고리 이름을 변경하면 기존 포스트에는 영향이 있나요?
**A**: 네, 카테고리 이름을 변경하면 해당 카테고리를 사용하는 모든 포스트에 자동으로 반영됩니다. 포스트는 새로운 카테고리 이름으로 표시됩니다.

### Q10: 포스트가 없는 빈 카테고리는 어떻게 처리해야 하나요?
**A**: 포스트가 없는 카테고리는 "포스트 수 필터"에서 "0개"를 선택하여 확인할 수 있습니다. 불필요한 빈 카테고리는 삭제하여 관리를 단순화하는 것이 좋습니다.

---

## 팁 & 트릭

### 1. 효율적인 검색
- **부분 검색**: 전체 단어가 아닌 일부만 입력해도 검색됩니다.
- **설명으로 검색**: 카테고리 이름뿐만 아니라 설명도 검색 대상입니다.
- **필터 조합**: 검색과 포스트 수 필터를 함께 사용하여 더 정확한 결과 얻기.

### 2. 색상 선택 팁
- **Recent Colors 활용**: 자주 사용하는 색상은 Recent Colors에 저장되므로 빠르게 재사용 가능.
- **Color Picker**: 커스텀 색상이 필요하면 Color Picker에서 직접 선택.
- **일관성**: 카테고리 유형별로 색상을 통일하여 사용자 경험 개선.

### 3. 아이콘 선택 팁
- **lucide.dev 활용**: 아이콘이 결정나지 않으면 [lucide.dev](https://lucide.dev/)에서 검색.
- **의미 있는 아이콘**: 카테고리 내용과 일치하는 아이콘 선택.
- **일관성**: 같은 종류의 카테고리에는 비슷한 스타일의 아이콘 사용.

### 4. 카테고리 구조 설계
- **명확한 분류**: 너무 많은 카테고리는 피하고, 명확한 분류 체계 구축.
- **포스트 분포**: 각 카테고리에 충분한 포스트가 있도록 계획.
- **유지보수**: 정기적으로 빈 카테고리를 정리하여 관리 부담 경감.

### 5. 대량 작업 처리
- **여러 카테고리 생성**: 모달을 닫지 않고 저장 후 다시 새로 입력하여 순차적으로 생성 가능.
- **필터링**: 포스트 수 필터를 활용하여 수정/삭제가 필요한 카테고리 그룹화.

---

## 문제 해결

### 문제 1: 카테고리가 저장되지 않음
**증상**: "저장" 버튼을 클릭해도 모달이 닫히지 않음.

**해결 방법**:
1. 폼 검증 오류 메시지를 확인합니다 (빨간 텍스트).
2. 필수 항목을 모두 입력했는지 확인합니다.
3. 색상이 유효한 hex 코드 형식인지 확인합니다 (#RRGGBB).
4. Slug가 kebab-case 형식 (소문자, 숫자, 하이픈만 포함)인지 확인합니다.
5. 네트워크 연결을 확인합니다.

### 문제 2: 아이콘이 표시되지 않음
**증상**: 아이콘 필드는 저장되었지만 테이블에 표시되지 않음.

**해결 방법**:
1. 아이콘 이름이 Lucide 라이브러리에 존재하는지 [lucide.dev](https://lucide.dev/)에서 확인합니다.
2. 대소문자가 정확한지 확인합니다 (PascalCase 필수, 예: BookOpen).
3. 아이콘이 올바르게 입력되었으면 기본 폴더 아이콘으로 표시될 수 있습니다.
4. 페이지를 새로고침하여 캐시를 초기화합니다.

### 문제 3: 색상이 다크 모드에서 잘 안 보임
**증상**: 라이트 모드에서는 보이지만 다크 모드에서 색상이 구분되지 않음.

**해결 방법**:
1. 더 밝거나 진한 색상으로 변경합니다.
2. ColorPicker에서 명도가 높은 색상 (밝은 색상)을 선택합니다.
3. 프리셋 색상 중에서 선택하는 것을 권장합니다 (다크 모드 호환성 검증됨).

### 문제 4: 포스트가 있는 카테고리를 삭제한 후 복구하고 싶음
**증상**: 삭제한 카테고리를 되돌리고 싶음.

**해결 방법**:
1. **즉시 복구**: 관리자 데이터베이스 백업이 있으면 복구 가능합니다. 기술 지원팀에 문의하세요.
2. **수동 복구**: 같은 이름과 설정으로 카테고리를 다시 생성합니다. (포스트의 카테고리 재할당 필요)
3. **예방**: 삭제 전에 "포스트 수" 필터를 확인하여 포스트 유무를 반드시 검증하세요.

### 문제 5: 검색 결과가 표시되지 않음
**증상**: 존재하는 카테고리를 검색해도 나타나지 않음.

**해결 방법**:
1. 검색어가 정확한지 확인합니다 (공백, 특수문자 확인).
2. 포스트 수 필터를 "전체"로 변경합니다.
3. 검색 필드를 비워서 모든 카테고리를 다시 표시합니다.
4. 페이지를 새로고침합니다.
5. 브라우저 개발자 도구에서 네트워크 오류를 확인합니다.

---

## 키보드 단축키

현재 버전에서는 특정 키보드 단축키가 정의되어 있지 않습니다. 마우스를 사용하여 버튼을 클릭하세요. 향후 버전에서 다음 단축키가 추가될 수 있습니다:
- `Ctrl+N` 또는 `Cmd+N`: 새 카테고리 생성
- `Ctrl+F` 또는 `Cmd+F`: 검색 필드 포커스
- `Escape`: 모달 닫기

---

## 성능 최적화 팁

- **검색 디바운싱**: 검색창에 입력 후 300ms 대기 후 검색 수행 (서버 부하 감소).
- **테이블 페이지네이션**: 테이블이 느리면 필터를 사용하여 데이터 양을 줄이세요.
- **대량 데이터**: 카테고리가 매우 많으면 검색이나 필터로 범위를 좁혀서 관리하세요.

---

**최종 수정**: 2025-11-21
**가이드 버전**: 1.0
**호환 페이지**: `/admin/blog/categories`
